<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dart Packages, Imports, and Futures | MAD9135</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/svg" href="/w2025/assets/react.svg">
    <link rel="shortcut icon" type="image/svg" href="/w2025/assets/react.svg">
    <meta name="description" content="Multi-Platform App Development">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.12e34b74.css" as="style"><link rel="preload" href="/w2025/assets/js/app.885a621d.js" as="script"><link rel="preload" href="/w2025/assets/js/2.c164d911.js" as="script"><link rel="preload" href="/w2025/assets/js/38.6431bf07.js" as="script"><link rel="preload" href="/w2025/assets/js/7.cd13af28.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.9825fa6f.js"><link rel="prefetch" href="/w2025/assets/js/11.554b89c7.js"><link rel="prefetch" href="/w2025/assets/js/12.6c968cd2.js"><link rel="prefetch" href="/w2025/assets/js/13.fd8564e9.js"><link rel="prefetch" href="/w2025/assets/js/14.53468325.js"><link rel="prefetch" href="/w2025/assets/js/15.350a32aa.js"><link rel="prefetch" href="/w2025/assets/js/16.1d25274f.js"><link rel="prefetch" href="/w2025/assets/js/17.e041c5bf.js"><link rel="prefetch" href="/w2025/assets/js/18.58c48539.js"><link rel="prefetch" href="/w2025/assets/js/19.4b93e648.js"><link rel="prefetch" href="/w2025/assets/js/20.6b88084f.js"><link rel="prefetch" href="/w2025/assets/js/21.ed1f0a7f.js"><link rel="prefetch" href="/w2025/assets/js/22.35331b22.js"><link rel="prefetch" href="/w2025/assets/js/23.3e2f76a1.js"><link rel="prefetch" href="/w2025/assets/js/24.d6d462d7.js"><link rel="prefetch" href="/w2025/assets/js/25.71478898.js"><link rel="prefetch" href="/w2025/assets/js/26.cae51d67.js"><link rel="prefetch" href="/w2025/assets/js/27.42cb3cea.js"><link rel="prefetch" href="/w2025/assets/js/28.463d124c.js"><link rel="prefetch" href="/w2025/assets/js/29.487fa545.js"><link rel="prefetch" href="/w2025/assets/js/3.75732a29.js"><link rel="prefetch" href="/w2025/assets/js/30.e021a2fc.js"><link rel="prefetch" href="/w2025/assets/js/31.bbd4690b.js"><link rel="prefetch" href="/w2025/assets/js/32.9fb693fc.js"><link rel="prefetch" href="/w2025/assets/js/33.17b775d2.js"><link rel="prefetch" href="/w2025/assets/js/34.cb89ed8c.js"><link rel="prefetch" href="/w2025/assets/js/35.b45c89bf.js"><link rel="prefetch" href="/w2025/assets/js/36.17939ada.js"><link rel="prefetch" href="/w2025/assets/js/37.4704709b.js"><link rel="prefetch" href="/w2025/assets/js/39.da83f336.js"><link rel="prefetch" href="/w2025/assets/js/4.a1de3720.js"><link rel="prefetch" href="/w2025/assets/js/40.bdd7ae32.js"><link rel="prefetch" href="/w2025/assets/js/41.aefd97ef.js"><link rel="prefetch" href="/w2025/assets/js/42.5c6facdd.js"><link rel="prefetch" href="/w2025/assets/js/43.62a6cf35.js"><link rel="prefetch" href="/w2025/assets/js/44.3b9fefb2.js"><link rel="prefetch" href="/w2025/assets/js/45.6c2ed6da.js"><link rel="prefetch" href="/w2025/assets/js/46.9d5acee9.js"><link rel="prefetch" href="/w2025/assets/js/47.ff363b72.js"><link rel="prefetch" href="/w2025/assets/js/48.b0c7c205.js"><link rel="prefetch" href="/w2025/assets/js/49.88f30581.js"><link rel="prefetch" href="/w2025/assets/js/5.8dc69c74.js"><link rel="prefetch" href="/w2025/assets/js/50.c196863a.js"><link rel="prefetch" href="/w2025/assets/js/51.7326a8e9.js"><link rel="prefetch" href="/w2025/assets/js/52.71a0c2be.js"><link rel="prefetch" href="/w2025/assets/js/53.ee266c13.js"><link rel="prefetch" href="/w2025/assets/js/54.3fef38bb.js"><link rel="prefetch" href="/w2025/assets/js/55.1d1b0cff.js"><link rel="prefetch" href="/w2025/assets/js/6.66583295.js"><link rel="prefetch" href="/w2025/assets/js/8.5583b7c0.js"><link rel="prefetch" href="/w2025/assets/js/9.b764f9a5.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.12e34b74.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><img src="/w2025/mad-d-logo-sm.png" alt="MAD9135" class="logo"> <span class="site-name can-hide">MAD9135</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/deliverables/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/deliverables/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/w2025/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Dart Hybrid Content</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/hybrid/dart/" aria-current="page" class="sidebar-link">1. Dart Introduction</a></li><li><a href="/w2025/modules/hybrid/dart/1-start.html" class="sidebar-link">2. Dart Fundamentals</a></li><li><a href="/w2025/modules/hybrid/dart/2-classes.html" class="sidebar-link">3. Dart Classes</a></li><li><a href="/w2025/modules/hybrid/dart/3-packages.html" aria-current="page" class="active sidebar-link">4. Dart Packages, Imports, and Futures</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#imports" class="sidebar-link">Imports</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#built-in-dart-libraries" class="sidebar-link">Built-in Dart Libraries</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#pubdev-packages" class="sidebar-link">PubDev Packages</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#futures" class="sidebar-link">Futures</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#dart-http-requests" class="sidebar-link">Dart HTTP Requests</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#working-with-json" class="sidebar-link">Working with JSON</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#data-models" class="sidebar-link">Data Models</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/hybrid/dart/3-packages.html#hybrid-modules" class="sidebar-link">Hybrid Modules</a></li></ul></li><li><a href="/w2025/modules/hybrid/dart/4-patterns.html" class="sidebar-link">5. Dart Patterns and Errors</a></li><li><a href="/w2025/modules/hybrid/dart/additional.html" class="sidebar-link">Additional Resources for Learning Dart</a></li><li><a href="/w2025/modules/hybrid/dart/exercises.html" class="sidebar-link">Dart Hybrid Exercises</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React Native</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title gold">
    Dart
  </div> <h1>Dart Packages, Imports, and Futures</h1> <div class="underdev no">Module Still Under Development</div></header> <h1 id="packages-and-imports"><a href="#packages-and-imports" class="header-anchor">#</a> Packages and Imports</h1> <p>When building applications with Dart, a <code>.dart</code> file is called a library. Think of a library just like a JavaScript module.</p> <p>In dart you can import libraries and packages. A Dart package is similar to a Node Module that you would install with NPM or Yarn.</p> <p>A package is basically a folder that contains a <code>pubspec.yaml</code> file plus a <code>lib</code> folder that contains at least one <code>.dart</code> file that has a <code>main()</code> method. When we build Flutter apps, our first file
will be <code>/lib/main.dart</code>.</p> <h2 id="imports"><a href="#imports" class="header-anchor">#</a> Imports</h2> <p>When importing libraries or packages into a <code>.dart</code> file, you use the keyword <code>import</code> at the top of the file. You can import as many as you need.</p> <p>Every Dart file (plus its parts) is a library, even if it doesnâ€™t use a library directive.</p> <p>Importing a library generally means that you are importing another <code>.dart</code> file for your current file to use. The value that you are importing should be wrapped in double or single quotation marks and
prefixed with <code>package:</code>, if it is a package that you are getting from <code>pub.dev</code> and including in your <code>pubspec.yaml</code>, OR <code>dart:</code> if it is one of the built-in packages, OR just a relative URL.</p> <p>The only required argument to import is a URI specifying the library. For built-in libraries, the URI has the special <code>dart:</code> scheme. For other libraries, you can use a file system path or the
<code>package:</code> scheme. The <code>package</code>: scheme specifies libraries provided by a package manager such as the pub tool.</p> <p>Most of the time you will get the package with the terminal command <code>pub get &lt;package&gt;</code>. This will add it to the pubspec.yaml file for you.</p> <p>We can add package files to our project too. Basically a package is a folder that contains a <code>pubspec.yaml</code> file. So, you can create local packages inside your projects and import them using your own
package name like this:</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:my_project_name/my_code.dart'</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This will give you direct access to everything inside the <code>my_code.dart</code> file except for variables that have been marked as private by starting their names with underscores. The project name is the one that you used when running the <code>flutter create</code> command.</p> <p>If you just have files inside of the <code>/lib</code> folder, the simplest thing to do is to import them via a relative url.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'../lib/somefile.dart'</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a href="https://dart.dev/language/libraries" target="_blank" rel="noopener noreferrer">Reference for imports and libraries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="built-in-dart-libraries"><a href="#built-in-dart-libraries" class="header-anchor">#</a> Built-in Dart Libraries</h2> <p>Dart keeps projects small and efficient by not including everything that the language can do automatically. There is a core to the language that you can always use, but there are also additional
built-in libraries that you can include by importing them at the top of your file.</p> <p>See the whole <a href="https://dart.dev/guides/libraries" target="_blank" rel="noopener noreferrer">list of Dart core libraries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>The <code>dart:core</code> library is automatically available in every <code>.dart</code> file.</p> <p>The <code>dart:async</code> library lets us work with <code>Futures</code> (the Dart version of Promises).</p> <p>The <code>dart:convert</code> library lets you work with JSON files.</p> <p>The <code>dart:io</code> library lets you work with HTTP, files, and sockets.</p> <p>The <code>dart:math</code> library lets you work with Mathematical functions, constants, and random numbers.</p> <p>Say you want to generate a Random integer between 50 and 100, inclusive. You will need to import the <code>dart:math</code> library at the top of your file.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'dart:math'</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  int min <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
  int max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  int range <span class="token operator">=</span> max <span class="token operator">-</span> min<span class="token punctuation">;</span>
  int randy <span class="token operator">=</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'Your random number is </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">randy</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Here is the <a href="https://api.dart.dev/stable/3.1.0/dart-math/Random-class.html" target="_blank" rel="noopener noreferrer">reference for the Random number generator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="pubdev-packages"><a href="#pubdev-packages" class="header-anchor">#</a> PubDev Packages</h2> <p>If you are importing an external package, then you will need to add it as a dependency to your <code>pubspec.yaml</code> file.</p> <p>The <a href="https://pub.dev/" target="_blank" rel="noopener noreferrer">Pub.dev website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is the official repository for Dart and Flutter packages. You will find practically every package you could need for a Dart or Flutter project on this site. You
can have your own packages hosted elsewhere, but the standard practice is to publish them to the Pub Dev website.</p> <p>Say for example you want to generate a uuid to use in your app. If you go to the Pub Dev website and search for uuid, then you will see a list of ranked results. The top result
<a href="https://pub.dev/packages/uuid" target="_blank" rel="noopener noreferrer">is this package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>At the top of the page you can see that the current version number is <code>4.5.1</code> (may have changed since I wrote this). Below that is a menu bar with the links: <code>Readme | Changelog | Example | Installing | Versions | Scores</code>.</p> <p>Click the <code>Installing</code> link for instructions and details. From the Terminal in VSCode, run:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dart pub <span class="token function">add</span> uuid
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This command will add the package <code>uuid</code> to your <code>pubspec.yaml</code> file. Typically VSCode will download the package into your project when you save a change to <code>pubspec.yaml</code>. If you open your pubspec file you will now see this package listed under dependencies.</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">uuid</span><span class="token punctuation">:</span> ^4.5.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>To add the files to your project, if VSCode did not already do this, then you can run <code>dart pub get</code>, which will download and save the dependency packages from <code>pubspec.yaml</code>.</p> <p>The actual package files are not saved in your project folder. If you want to find the actual package files, you can look in <code>~/.pub-cache/hosted/pub.dev/</code> and look for the folder named for the package and its version. This is the global location for all your packages that you include in your projects.</p> <p>If you look through the right hand menu you can find links <code>Documentation</code> and <code>API Reference</code>. This is where you can location all the real full explanations of the Classes, methods, and properties in the package. These pages will look just like the documentation on the <a href="https://api.flutter.dev" target="_blank" rel="noopener noreferrer">https://api.flutter.dev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> site and the <a href="https://api.dart.dev/" target="_blank" rel="noopener noreferrer">https://api.dart.dev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> site.</p> <h2 id="futures"><a href="#futures" class="header-anchor">#</a> Futures</h2> <p>In Dart, <code>Futures</code> are the equivalent of JavaScript <code>Promises</code>. Futures are part of the <code>dart:async</code> built-in library. However, we don't need to import <code>dart:async</code> to use the Future and Stream APIs, because <code>dart:core</code> exports those classes.</p> <p><a href="https://dart.dev/guides/libraries/library-tour#dartasync---asynchronous-programming" target="_blank" rel="noopener noreferrer">Future references<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token function">anAsyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>aReturnValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">'some value'</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>aReturnValue<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//chained then methods just like JavaScript</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//instead of catch() we use catchError()</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Dart also has the <code>async</code> and <code>await</code> keywords which work just like they do in JavaScript. Except that you put the <code>async</code> keyword between the parentheses and the opening curly brace, instead of in front of the keyword <code>function</code> like you do in JavaScript.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token keyword">final</span> response <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>someuri<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//gets the headers</span>
  <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//handle the error</span>
    <span class="token comment">//when using async await we need to wrap them in a try catch block</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The Dart equivalent of <code>Promise.all(arrayOfPromises)</code> is <code>Future.wait(arrayOfFutures)</code>.</p> <p>A useful feature that Dart has, is a built-in method <code>delayed</code> for creating an asynchronous delay before making an asynchronous method call. The first parameter for the delayed method is a <code>Duration</code> object. The <code>Duration</code> object takes any combination of named parameters - <code>microseconds</code>, <code>milliseconds</code>, <code>seconds</code>, <code>minutes</code>, <code>hours</code>, and <code>days</code>. The second parameter for <code>Duration</code> is an optional function.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token class-name">Future</span><span class="token punctuation">.</span><span class="token function">delayed</span><span class="token punctuation">(</span>
      <span class="token keyword">const</span> <span class="token class-name">Duration</span><span class="token punctuation">(</span>seconds<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string-literal"><span class="token string">'Large Latte'</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="dart-http-requests"><a href="#dart-http-requests" class="header-anchor">#</a> Dart HTTP Requests</h2> <p>In Dart, you need to import the <code>dart:http</code> package to be able to make the equivalent of JavaScript <code>fetch</code> calls. If you are fetching JSON files then you will also need to import the <code>dart:convert</code> package to convert between JSON and actual JSON data types.</p> <p>Remember to add these to your project with the Terminal commands <code>dart pub add http</code> and <code>dart pub add convert</code>.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:http/http.dart'</span></span> <span class="token operator">as</span> http<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'dart:convert'</span></span> <span class="token operator">as</span> convert<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> uri <span class="token operator">=</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'https://dart.dev/f/packages/http.json'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> info <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//info about the response</span>
    <span class="token keyword">final</span> responseG <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http get request</span>
    <span class="token keyword">final</span> responseP <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http post request</span>

  <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'Failed http request </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">uri</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Learn more about <a href="https://dart.dev/guides/libraries/library-tour#uris" target="_blank" rel="noopener noreferrer">working with and encoding URIs here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Learn more about making <a href="https://dart.dev/tutorials/server/fetch-data" target="_blank" rel="noopener noreferrer">Http Requests here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://pub.dev/packages/http" target="_blank" rel="noopener noreferrer">Here is the link to the HTTP package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="working-with-json"><a href="#working-with-json" class="header-anchor">#</a> Working with JSON</h2> <p>The <code>dart:convert</code> built-in library is required when you want to convert a JSON string to native Dart datatypes or vice versa. We do actually have to import <code>dart:convert</code> to make this work.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'dart:convert'</span></span> <span class="token operator">as</span> convert<span class="token punctuation">;</span>

<span class="token keyword">var</span> jsonString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'''
  [
    {&quot;score&quot;: 40},
    {&quot;score&quot;: 80}
  ]
'''</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> scores <span class="token operator">=</span> convert<span class="token punctuation">.</span><span class="token function">jsonDecode</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">assert</span><span class="token punctuation">(</span>scores <span class="token operator">is</span> <span class="token class-name">List</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this passes so the code continues. scores is a List</span>
<span class="token comment">//assert() is like a console log statement that runs an if statement on the expression and then outputs true or false</span>
<span class="token keyword">var</span> firstScore <span class="token operator">=</span> scores<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 40</span>
<span class="token keyword">assert</span><span class="token punctuation">(</span>firstScore <span class="token operator">is</span> <span class="token class-name">Map</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// scores[0] is a Map</span>
<span class="token keyword">assert</span><span class="token punctuation">(</span>firstScore<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'score'</span></span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// scores[0]['score'] is 40</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>With the <code>dart:convert</code> package imported we have access to the <code>jsonDecode</code> and <code>jsonEncode</code> methods. In the example above the String is being converted into a Dart <code>List</code>.</p> <p>When you use a method like <code>http.get()</code> and get an HTTP Response object, which will have properties including a <code>body</code> and a <code>statusCode</code>. We can use the <code>jsonDecode</code> method on the body like this:</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'https://jsonplaceholder.typicode.com/users/'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> jsonResponse <span class="token operator">=</span> convert<span class="token punctuation">.</span><span class="token function">jsonDecode</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token operator">as</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> itemCount <span class="token operator">=</span> jsonResponse<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'Number of books about http: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">itemCount</span></span><span class="token string">.'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'Request failed with status: </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">response<span class="token punctuation">.</span>statusCode</span><span class="token punctuation">}</span></span><span class="token string">.'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>The <code>as List&lt;dynamic&gt;</code> means that we know our JSON string contains a <code>List</code>, and that every item in the <code>List</code> can be any data type, to be dynamically determined as converted.</p> <h2 id="data-models"><a href="#data-models" class="header-anchor">#</a> Data Models</h2> <p>A common design pattern in applications is converting JSON Strings into Lists and Maps. However, this is really only the first step. The rest of the design pattern is converting the objects into custom data models. While this may seem like extra work up front, it does save us time and problems later, as the project grows.</p> <p>For example, if you had a list of movies or a list of users, then we would want to build a Movie model class or a User model class. The following is a basic version of a model for a Movie object. We declare a series of instance properties at the top and then a default constructor which expects a value for each named parameter and will assign the value to the associated property.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">Movie</span> <span class="token punctuation">{</span>
  int id<span class="token punctuation">;</span>
  <span class="token class-name">String</span> title<span class="token punctuation">;</span>
  <span class="token class-name">DateTime</span><span class="token operator">?</span> release_date<span class="token punctuation">;</span> <span class="token comment">//nullable</span>
  <span class="token class-name">String</span><span class="token operator">?</span> poster_path<span class="token punctuation">;</span> <span class="token comment">//nullable because null is allowed here</span>
  double popularity<span class="token punctuation">;</span>

  <span class="token class-name">Movie</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>release_date<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>poster_path<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>popularity<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>We can add the keyword <code>required</code> in front of any or all of the named parameters. This will ensure type checking at build time and proper linting while writing the code. If we do not expect or want the properties to change after instantiation then we can prefix each of our property declarations with the keyword <code>final</code>.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">Movie</span> <span class="token punctuation">{</span>
  <span class="token comment">//our Movie data model class with default constructor</span>

  <span class="token keyword">final</span> int id<span class="token punctuation">;</span> <span class="token comment">//cannot change after instantiation</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span> <span class="token comment">//cannot change after instantiation</span>
  <span class="token class-name">DateTime</span><span class="token operator">?</span> release_date<span class="token punctuation">;</span> <span class="token comment">//nullable</span>
  <span class="token class-name">String</span><span class="token operator">?</span> poster_path<span class="token punctuation">;</span> <span class="token comment">//nullable because null is allowed here</span>
  double popularity<span class="token punctuation">;</span>

  <span class="token class-name">Movie</span><span class="token punctuation">(</span><span class="token punctuation">{</span>required <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>release_date<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>poster_path<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>popularity<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//require id, title and popularity</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>In addition to the default constructor, we can also add one or more named constructors for situations where we have a JSON string that has been converted into a List or Map, and we want to create one or more <code>Movie</code> objects from the <code>Map</code>, instead of passing each named parameter individually to the default constructor.</p> <p>There are two ways that we can write the named constructor. By default, a constructor function cannot have a return statement. It is intended to create an instance of the class. The function is an alternative to the default constructor. The instance <strong>is</strong> the return value.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token class-name">Movie</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> dataMap<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//named constructor for the Movie data model class</span>
  <span class="token comment">// to create Movie object instances from a JSON derived Map</span>
  <span class="token comment">//just assign the values from the Map to the instance variables...</span>
  <span class="token comment">// checking for valid values</span>
  id <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'id'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">;</span>
  title <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'title'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'release_date'</span></span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    release_date <span class="token operator">=</span> <span class="token class-name">DateTime</span><span class="token punctuation">.</span><span class="token function">tryParse</span><span class="token punctuation">(</span>dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'release_date'</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    release_date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  poster_path <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'poster_path'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">'default_image.jpg'</span></span><span class="token punctuation">;</span>
  popularity <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'popularity'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>The other way that we could write this is to turn it into a factory function. When we create factory functions we will have a return statement. What we return is the call to any actual constructor (including the default constructor for our current Class). In our case, it is our Movie class default constructor.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">factory</span> <span class="token class-name">Movie</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> dataMap<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// factory function to create Movie object instances</span>
  <span class="token comment">// from a JSON derived Map</span>
  <span class="token comment">// alternative to the named constructor</span>
  <span class="token comment">//check the values and create a variable for each value</span>
  <span class="token comment">// of the correct type</span>
  int id <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'id'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> title <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'title'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">;</span>
  <span class="token class-name">DateTime</span><span class="token operator">?</span> release_date<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'release_date'</span></span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    release_date <span class="token operator">=</span> <span class="token class-name">DateTime</span><span class="token punctuation">.</span><span class="token function">tryParse</span><span class="token punctuation">(</span>dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'release_date'</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    release_date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> poster_path <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'poster_path'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">'default_image.jpg'</span></span><span class="token punctuation">;</span>
  double popularity <span class="token operator">=</span> dataMap<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'popularity'</span></span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">//call a constructor which will create an instance object</span>
  <span class="token keyword">return</span> <span class="token class-name">Movie</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> id<span class="token punctuation">,</span>
    title<span class="token punctuation">:</span> title<span class="token punctuation">,</span>
    release_date<span class="token punctuation">:</span> release_date<span class="token punctuation">,</span>
    poster_path<span class="token punctuation">:</span> poster_path<span class="token punctuation">,</span>
    popularity<span class="token punctuation">:</span> popularity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>With either approach, the named constructor or factory function, we are accepting the full Map of data that comes from the API and we are going to assign only the values we want from the Map to our instance variables. We are also using the nullish coalescing operator <code>??</code> to check if any of them are <code>null</code>. The nullish coalescing operator will assign the value on the right side <strong>only</strong> if the value on the left is null. We could do more data validation or custom errors here too if we wanted.</p> <p>The result of our model class is to be able to have an iterable list of objects of a specific type.</p> <p>When working with a <code>Map</code>, we use the square bracket syntax to access the values of different keys. This is the generic solution that we use when working directly with the <code>List&lt;Map&lt;String, dynamic&gt;&gt;</code> that we get from the JSON string.</p> <p>When we use a model class to create a custom object, it means that we use dot notation to access properties of an object.</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'dart:convert'</span></span><span class="token punctuation">;</span> <span class="token comment">// for JSON conversion</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:http/http.dart'</span></span> <span class="token operator">as</span> http<span class="token punctuation">;</span> <span class="token comment">// for the HTTP methods</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:myproject/models/movie.data'</span></span><span class="token punctuation">;</span> <span class="token comment">//the data model we are working with</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:http_helper/utils/exceptions.dart'</span></span> <span class="token keyword">show</span> <span class="token class-name">HttpHelperException</span><span class="token punctuation">;</span> <span class="token comment">// our custom exception class in a utils.dart file</span>

<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Movie</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchMovie</span><span class="token punctuation">(</span>int id<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
  <span class="token class-name">Uri</span> url <span class="token operator">=</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'https://somemovieapi.com/movies/</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">id</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//url to fetch one movie object from an api</span>
  <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">http<span class="token punctuation">.</span></span>Response</span> response <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If the server did return a 200 OK response, then parse the JSON.</span>
    <span class="token keyword">return</span> <span class="token class-name">Movie</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token function">jsonDecode</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token operator">as</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// If the server did not return a 200 OK response, then throw an exception.</span>
    <span class="token keyword">throw</span> <span class="token class-name">HttpHelperException</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'Failed to load movie </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">id</span></span><span class="token string">.'</span></span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="hybrid-modules"><a href="#hybrid-modules" class="header-anchor">#</a> Hybrid Modules</h2> <div class="custom-block warning"><p class="custom-block-title">TODO Hybrid Modules</p> <ol><li><a href="/w2025/modules/hybrid/dart/" class="router-link-active">Introduction and Install</a></li> <li><a href="/w2025/modules/hybrid/dart/1-start.html">Variables and Functions</a></li> <li><a href="/w2025/modules/hybrid/dart/2-classes.html">Classes</a></li> <li><a href="/w2025/modules/hybrid/dart/3-packages.html" aria-current="page" class="router-link-exact-active router-link-active">Packages, Imports, and Mixins</a></li> <li><a href="/w2025/modules/hybrid/dart/4-patterns.html">Patterns and Destructuring</a></li> <li><a href="/w2025/modules/hybrid/dart/exercises.html">Exercises</a></li></ol></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/11/2024, 4:22:26 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/w2025/modules/hybrid/dart/2-classes.html" class="prev">
        3. Dart Classes
      </a></span> <span class="next"><a href="/w2025/modules/hybrid/dart/4-patterns.html">
        5. Dart Patterns and Errors
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/w2025/assets/js/app.885a621d.js" defer></script><script src="/w2025/assets/js/2.c164d911.js" defer></script><script src="/w2025/assets/js/38.6431bf07.js" defer></script><script src="/w2025/assets/js/7.cd13af28.js" defer></script>
  </body>
</html>
